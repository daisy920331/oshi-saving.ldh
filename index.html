<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>è¿½æ˜Ÿå­˜éŒ¢æ‰‹å¸³</title>

  <!-- å…¨ç«™å…±ç”¨æ¨£å¼ -->
  <link rel="stylesheet" href="assets/app.css" />

  <!-- é¦–é å°èª¿æ•´ -->
  <style>
    main{
      max-width:900px;
      margin:0 auto;
      padding:40px 16px 60px;
    }

    .home-actions{
      display:grid;
      grid-template-columns: 1fr;
      gap:20px;
      margin-top:40px;
    }
    @media (min-width:720px){
      .home-actions{
        grid-template-columns: 1fr 1fr;
      }
    }

    .home-actions a{
      text-decoration:none;
    }

    .home-actions .btn.primary{
      width:100%;
      min-height:180px;
      font-size:18px;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      gap:10px;
    }

    .home-kpi{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      justify-content:center;
      margin-top:20px;
    }

    .home-kpi .pill{
      font-size:14px;
    }

    footer{
      margin-top:60px;
      text-align:center;
      font-size:12px;
      color:var(--muted);
    }
  </style>
</head>

<body>
  <div class="bg-wrap"></div>

  <header>
    <h1>è¿½æ˜Ÿå­˜éŒ¢æ‰‹å¸³</h1>
    <div class="sub">ç‚º Shokichi / Akira / EXILE THE SECOND</div>
  </header>

  <main>
    <!-- KPI -->
    <div class="home-kpi">
      <span class="pill">æœ¬æœˆåˆè¨ˆï¼š<b id="monthTotal">0</b> å…ƒ</span>
      <span class="pill">é€£çºŒå­˜éŒ¢ï¼š<b id="streak">0</b> å¤©</span>
    </div>

    <!-- ä¸»è¦å…¥å£ï¼ˆâš ï¸ åªæœ‰é€£çµï¼Œæ²’æœ‰ scriptï¼‰ -->
    <div class="home-actions">
      <a href="calendar.html" class="btn primary">
        ğŸ“… æœˆæ›†å­˜éŒ¢
        <span class="muted">æ¯å¤©è¨˜éŒ„ï¼Œè²¼ç´™é¼“å‹µ</span>
      </a>

      <a href="events.html" class="btn primary">
        ğŸ“š äº‹ä»¶çµ±æ•´
        <span class="muted">ä¾äº‹ä»¶å›é¡§æ¯ä¸€ç­†</span>
      </a>

      <a href="spend.html" class="btn primary">
        ğŸ’¸ èŠ±è²»è¨˜éŒ„
        <span class="muted">è¿½æ˜ŸèŠ±äº†å¤šå°‘ä¸€çœ¼çœ‹</span>
      </a>
    </div>

    <footer>
      <p>æ‰‹å¸³é¢¨ Ã— æ¨æ´»ç´€éŒ„</p>
    </footer>
  </main>

  <!-- âš ï¸ åªæœ‰ JS æª”æ‰ç”¨ script -->
  <script type="module">
    import {
      loadData,
      monthSum,
      calcStreak,
      applyBackground
    } from "./assets/app.js";

    await applyBackground("home");

    const el = id => document.getElementById(id);
    const data = loadData();

    const now = new Date();
    const y = now.getFullYear();
    const m = now.getMonth();

    el("monthTotal").textContent = String(monthSum(data, y, m, ""));
    el("streak").textContent = String(calcStreak(data));
  </script>
</body>
</html>
